<!-- <mat-sidenav-container>
  <mat-sidenav
    *ngIf="settings.menu == 'vertical'"
    [opened]="settings.sidenavIsOpened"
    [mode]="settings.sidenavIsPinned ? 'side' : 'over'"
    #sidenav
    class="sidenav mat-elevation-z6"
  > -->
<!-- <app-sidenav></app-sidenav> -->
<!-- </mat-sidenav> -->
<!-- <mat-sidenav-content
  id="main"
  perfectScrollbar
  [disabled]="settings.fixedHeader"
  (psScrollY)="onPsScrollY($event)"
> -->
<mat-toolbar style="background-color: #18497d; color: white" class="flex-p-x">
  <a
    *ngIf="settings.menu == 'horizontal'"
    mat-raised-button
    color="accent"
    routerLink="/"
    (click)="closeSubMenus()"
    class="small-logo"
    >G</a
  >
  <a
    *ngIf="settings.menu == 'horizontal'"
    class="logo"
    routerLink="/"
    (click)="closeSubMenus()"
    >GoSafe</a
  >
  <div fxLayout="row" fxLayoutAlign="space-between" class="w-100">
    <div fxLayout="row" style="align-items: center">
      <button mat-button class="mat-hover">Live Tacking</button>
      <button mat-button class="mat-hover">Vehicles</button>
      <button mat-button [matMenuTriggerFor]="GeoFenceMenu" class="mat-hover">
        Geofence <mat-icon>keyboard_arrow_down </mat-icon>
      </button>
      <button mat-button class="mat-hover" [matMenuTriggerFor]="routeMenu">
        Route <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
      <mat-menu #routeMenu="matMenu">
        <button mat-menu-item>Item 1</button>
        <button mat-menu-item>Item 2</button>
      </mat-menu>
      <div class="form-group">
        <label for="mapType"></label>
        <select
          class="form-control mapDropdown"
          name="mapType"
          id="mapType"
          value="Google Maps"
        >
          <option disabled value="Google Maps">Select Map</option>
          <option value="Google Maps">Google Maps</option>
          <option value="Open Street Maps" selected>Open Street Maps</option>
        </select>
      </div>
      <!-- <button mat-button class="mat-hover" [matMenuTriggerFor]="mapMenu">
        Map Type <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
      <mat-menu #mapMenu="matMenu" class="mapMenu">
        <button mat-menu-item class="mapType" (click)="mapType('Google Maps')">
          Google Maps
        </button>
        <button
          mat-menu-item
          class="mapType"
          (click)="mapType('Open Street Maps')"
        >
          Open Street Maps
        </button>
      </mat-menu> -->

      <button mat-button class="mat-hover" [matMenuTriggerFor]="reportsMenu">
        Reports <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
      <mat-menu #reportsMenu="matMenu">
        <button
          mat-menu-item
          [matMenuTriggerFor]="trackingReportsMenu"
          class="mat-child border-bottom"
        >
          Tracking Reports
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Fuel Reports
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Temprature Reports
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Management Reports
        </button>
      </mat-menu>
      <mat-menu #trackingReportsMenu="matMenu">
        <button mat-menu-item class="mat-child border-bottom">
          Asset History
        </button>
        <button
          mat-menu-item
          class="mat-child border-bottom"
          (click)="openAssetTripDialog()"
        >
          Asset Trips
        </button>
        <!-- <button mat-menu-item class="mat-child border-bottom" routerLink='asset-trip-report'>
          Asset Trips
        </button> -->
        <button mat-menu-item class="mat-child border-bottom">
          Multi Assets Kilometer
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Activity
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Alarm
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Commands
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Accumulative Trips Fuel
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Alarms Close Report
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Route Report
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Sensor History
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Driver Activity
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Driver Activity Summary
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Driver Trips
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Asset Engine RPM History
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Over Speed Report
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Driver Behaviour Report
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Container Trip Report
        </button>
        <button mat-menu-item class="mat-child border-bottom">
          Alarm Audit Report
        </button>
      </mat-menu>
      <mat-menu #GeoFenceMenu="matMenu">
        <button
          mat-menu-item
          class="mat-child border-bottom"
          (click)="GeoFencing()"
        >
          Show Fence
        </button>
        <button
          mat-menu-item
          class="mat-child border-bottom"
          (click)="CreateFencing()"
        >
          Create Fence
        </button>
      </mat-menu>
    </div>

    <div
      fxLayout="row"
      fxLayoutAlign="center center"
      style="width: max-content !important"
    >
      <!-- <span class="border-right">
        <button mat-icon-button class="notificationsUnread" (click)="fetchNotifications()">
          <mat-icon [matBadge]="notifications.length" matBadgePosition="after" matBadgeColor="accent">notifications
          </mat-icon>
        </button>
        <button class="d-none notificationsRead" mat-icon-button (click)="toggleNotifications()">
          <mat-icon>notifications</mat-icon>
        </button>
      </span> -->
      <span style="font-size: small; margin-left: 10px">Bhoomia Sharma</span>
      <button
        mat-button
        class="mat-hover"
        [matMenuTriggerFor]="userAccessablilityMenu"
      >
        <mat-icon>person_outline</mat-icon>
        <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
      <mat-menu #userAccessablilityMenu="matMenu">
        <button mat-menu-item (click)="Logout()">Sign Out</button>
      </mat-menu>
    </div>
  </div>
</mat-toolbar>

<div
  id="main-content"
  class="inner-sidenav-content transition-2"
  perfectScrollbar
  [disabled]="!settings.fixedHeader"
  (psScrollY)="onPsScrollY($event)"
>
  <app-breadcrumb></app-breadcrumb>
  <div [class.has-footer]="settings.hasFooter">
    <!-- Sidebar -->
    <div class="col-md-12 row p-1 m-0">
      <div class="col-md-2 p-1">
        <div class="shadow p-1 rounded" style="height: fit-content !important">
          <div class="panelKeysContainer rounded">
            <button
              mat-button
              class="userPanelKeys"
              (click)="openControlDialog()"
            >
              <img
                src="../../../assets/icons/Control-white.png"
                style="margin-left: 3px; height: 23px; margin-bottom: -20px"
              />
              <br />
              <span class="13px ​!important"> Control</span>
            </button>
            <button mat-button class="userPanelKeys">
              <img
                src="../../../assets/icons/Setting-White.png"
                style="margin-left: 8px; height: 30px; margin-bottom: -20px"
              />
              <br />
              <span class="13px ​!important">Settings</span>
            </button>
            <button
              mat-button
              class="userPanelKeys"
              (click)="openHistoryDialog()"
            >
              <!-- <mat-icon style="height: 0 !important">history</mat-icon> -->
              <img
                src="../../../assets/icons/History-White.png"
                style="margin-left: 8px; height: 30px; margin-bottom: -20px"
              />
              <br />
              <span class="13px ​!important"> History </span>
            </button>
          </div>
          <div class="vehicleList">
            <mat-tab-group [disablePagination]="true">
              <mat-tab>
                <ng-template mat-tab-label>
                  <img
                    src="../../../assets/icons/Online-White.png"
                    height="28px"
                  />
                  <!-- <mat-icon>assignment</mat-icon> -->
                  <span style="font-size: small !important"
                    >Onine ({{ TREE_DATA.length }})</span
                  >
                </ng-template>
                <input type="text" placeholder="Search" class="SearchInput" />
                <mat-accordion>
                  <!-- <mat-expansion-panel style="margin-bottom: 0.6rem" class="ParentCheckBox">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <input type="checkbox" style="margin-right: 10px" />
                        Devices ({{ TREE_DATA[0].SubMenu.length }})
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <span *ngFor="let item of TREE_DATA; let i = index">
                      <span *ngIf="item.grp_name === 'Devices'">
                        <div class="m-0 singleDevice border-bottom" *ngFor="let t1 of item.SubMenu; let j = index">
                          <input type="checkbox" [attr.data-dataTrack]="t1.datatrack"
                            [attr.data-device_id]="t1.device_id" (change)="
                              onCheck($event, t1.datatrack, t1.device_id)
                            " />
                          <mat-icon>drive_eta</mat-icon>
                          <span style="
                              max-width: 10ch;
                              white-space: nowrap;
                              overflow: hidden;
                              text-overflow: ellipsis;
                            ">{{ t1.device_id }}
                          </span>
                          <small class="text-center">Car's <br />
                            Speed</small>
                          <mat-icon>arrow_forward</mat-icon>
                        </div>
                      </span>
                    </span>
                  </mat-expansion-panel> -->
                  <mat-expansion-panel>
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <input type="checkbox" style="margin-right: 10px" />
                        Assets ({{ TREE_DATA[1].SubMenu.length }})
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <span *ngFor="let item of TREE_DATA; let i = index">
                      <span *ngIf="item.grp_name === 'Assets'">
                        <span *ngIf="item.SubMenu.length">
                          <mat-accordion>
                            <span
                              *ngFor="let t1 of item.SubMenu; let j = index"
                            >
                              <div
                                class="m-0 singleDevice border-bottom"
                                *ngIf="t1.vrn !== null"
                              >
                                <input
                                  type="checkbox"
                                  [attr.data-dataTrack]="t1.datatrack"
                                  [attr.data-device_id]="t1.device_id"
                                  (change)="
                                    onCheck($event, t1.datatrack, t1.device_id)
                                  "
                                />
                                <mat-icon>drive_eta</mat-icon>
                                <span
                                  style="
                                    max-width: 10ch;
                                    white-space: nowrap;
                                    overflow: hidden;
                                    text-overflow: ellipsis;
                                  "
                                  >{{ t1.vrn }}
                                </span>
                                <small class="text-center"
                                  >Car's <br />
                                  Speed</small
                                >
                                <mat-icon>arrow_forward</mat-icon>
                              </div>
                              <mat-expansion-panel *ngIf="t1.SubMenu.length">
                                <mat-expansion-panel-header
                                  class="nestedPanelHeader"
                                >
                                  <mat-panel-title>
                                    <input
                                      type="checkbox"
                                      style="margin-right: 10px"
                                    />
                                    {{ t1.grp_name }} ({{ t1.SubMenu.length }})
                                  </mat-panel-title>
                                </mat-expansion-panel-header>
                                <span *ngIf="t1.SubMenu.length">
                                  <span
                                    *ngFor="let t2 of t1.SubMenu; let k = index"
                                  >
                                    <div
                                      class="m-0 singleDevice border-bottom"
                                      *ngIf="t2.vrn !== null"
                                    >
                                      <input
                                        type="checkbox"
                                        [attr.data-dataTrack]="t2.datatrack"
                                        [attr.data-device_id]="t2.device_id"
                                        (change)="
                                          onCheck(
                                            $event,
                                            t2.datatrack,
                                            t2.device_id
                                          )
                                        "
                                      />
                                      <mat-icon>drive_eta</mat-icon>
                                      <span
                                        style="
                                          max-width: 10ch;
                                          white-space: nowrap;
                                          overflow: hidden;
                                          text-overflow: ellipsis;
                                        "
                                        >{{ t2.vrn }}
                                      </span>
                                      <small class="text-center"
                                        >Car's <br />
                                        Speed</small
                                      >
                                      <mat-icon>arrow_forward</mat-icon>
                                    </div>
                                    <mat-expansion-panel
                                      *ngIf="t2.SubMenu.length"
                                    >
                                      <mat-expansion-panel-header
                                        class="MorenestedPanelHeader"
                                      >
                                        <mat-panel-title>
                                          <input
                                            type="checkbox"
                                            style="margin-right: 10px"
                                          />
                                          {{ t2.grp_name }} ({{
                                            t2.SubMenu.length
                                          }})
                                        </mat-panel-title>
                                      </mat-expansion-panel-header>
                                      <span *ngIf="t2.SubMenu.length">
                                        <span
                                          *ngFor="
                                            let t3 of t2.SubMenu;
                                            let l = index
                                          "
                                        >
                                          <div
                                            class="
                                              m-0
                                              singleDevice
                                              border-bottom
                                            "
                                            *ngIf="t3.vrn !== null"
                                          >
                                            <input
                                              type="checkbox"
                                              [attr.data-dataTrack]="
                                                t3.datatrack
                                              "
                                              [attr.data-device_id]="
                                                t3.device_id
                                              "
                                              (change)="
                                                onCheck(
                                                  $event,
                                                  t3.datatrack,
                                                  t3.device_id
                                                )
                                              "
                                            />
                                            <mat-icon>drive_eta</mat-icon>
                                            <span
                                              style="
                                                max-width: 10ch;
                                                white-space: nowrap;
                                                overflow: hidden;
                                                text-overflow: ellipsis;
                                              "
                                              >{{ t3.vrn }}
                                            </span>
                                            <small class="text-center"
                                              >Car's <br />
                                              Speed</small
                                            >
                                            <mat-icon>arrow_forward</mat-icon>
                                          </div>
                                          <mat-expansion-panel>
                                            <mat-expansion-panel-header
                                              class="nestedPanelHeader"
                                            >
                                              <mat-panel-title>
                                                <input
                                                  type="checkbox"
                                                  style="margin-right: 10px"
                                                />
                                                {{ t3.grp_name }}
                                              </mat-panel-title>
                                            </mat-expansion-panel-header>
                                          </mat-expansion-panel>
                                        </span>
                                      </span>
                                    </mat-expansion-panel>
                                  </span>
                                </span>
                              </mat-expansion-panel>
                            </span>
                          </mat-accordion>
                        </span>
                      </span>
                    </span>
                  </mat-expansion-panel>
                </mat-accordion>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <img
                    src="../../../assets/icons/Offline-White.png"
                    height="28px"
                  />
                  <span style="font-size: small"> Users </span>
                </ng-template>
                Content 1
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <img
                    src="../../../assets/icons/Alarms-White.png"
                    height="28px"
                  />
                  <span style="font-size: small"> Alarms </span>
                </ng-template>
                Content 1
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
      <div class="col-md-10 p-1" style="position: relative">
        <!-- <button (click)="play()">Play</button>
        <button (click)="pause()">Pause</button> -->

        <!-- Fence List -->
        <mat-selection-list
          [multiple]="false"
          class="shadow rounded selectionList d-none"
          style="
            position: absolute;
            z-index: 1001;
            background: white;
            width: 20%;
            height: 88vh;
            margin: 4px;
            overflow-y: scroll;
          "
        >
          <mat-list-option
            value="Close"
            class="matListOption"
            (click)="closeFencing()"
            style="font-size: 2rem !important; background-color: red"
          >
            Close
            <mat-divider></mat-divider>
          </mat-list-option>
          <mat-list-option
            *ngFor="let geoFence of geoFences"
            [value]="geoFence.gf_name"
            class="matListOption"
            (click)="
              Draw({
                FenceParam: geoFence.FenceParam,
                gf_id: geoFence.gf_id,
                gf_diff: geoFence.gf_diff,
                gf_name: geoFence.gf_name,
                gf_type: geoFence.gf_type,
                gf_diff: geoFence.gf_diff
              })
            "
          >
            <span *ngIf="geoFence.gf_type === 'Circle'">
              <img
                style="margin-right: 10px"
                src="../../../assets/icons/Circle.jpg"
                alt="cir"
              />
            </span>
            <span *ngIf="geoFence.gf_type === 'Rectangle'">
              <img
                style="margin-right: 10px"
                src="../../../assets/icons/square.jpg"
                alt="sq"
              />
            </span>
            <span *ngIf="geoFence.gf_type === 'Polygon'">
              <img
                style="margin-right: 10px"
                src="../../../assets/icons/polygone.png"
                alt="poly"
              />
            </span>
            {{ geoFence.gf_name }}
            <mat-divider></mat-divider>
          </mat-list-option>
        </mat-selection-list>
        <!-- Fence List -->
        <router-outlet></router-outlet>
        <!-- <app-dashboard></app-dashboard> -->
      </div>
    </div>
  </div>
</div>
<div
  #backToTop
  fxLayout="row"
  fxLayoutAlign="center center"
  class="back-to-top"
  (click)="scrollToTop()"
>
  <mat-icon>arrow_upward</mat-icon>
</div>
<!-- </mat-sidenav-content> -->
<!-- </mat-sidenav-container> -->

<!-- History Record -->
<div class="recordDialogOffset d-none">
  <div class="export d-none">
    <button mat-icon-button>
      <img src="../../../assets/icons/ExportToExcel.png" alt="" />
    </button>
    <br />
    <button mat-icon-button>
      <img src="../../../assets/icons/ExportToPDF.png" alt="" />
    </button>
  </div>
  <div class="shapeSelect d-none">
    <button mat-icon-button>
      <img src="../../../assets/icons/square.jpg" alt="" />
    </button>
    <br />
    <button mat-icon-button>
      <img src="../../../assets/icons/polygone.png" alt="" />
    </button>
    <br />
    <button mat-icon-button>
      <img src="../../../assets/icons/Circle.jpg" alt="" />
    </button>
  </div>
  <button
    mat-icon-button
    class="recordControl expBtn"
    (click)="export()"
    data-title="Export"
  >
    <img src="../../../assets/icons/Export.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl drawButton"
    (click)="draw()"
    data-title="Draw Route"
  >
    <img src="../../../assets/icons/Route.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl pauseBtn d-none"
    (click)="pause()"
    data-title="Pause"
  >
    <img src="../../../assets/icons/Pause.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl playBtn"
    (click)="play()"
    data-title="Play"
  >
    <img src="../../../assets/icons/Play.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl"
    (click)="speed()"
    data-title="Speed"
  >
    <img src="../../../assets/icons/Speed.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl"
    (click)="stop()"
    data-title="Stop"
  >
    <img src="../../../assets/icons/Stop.png" />
  </button>
  <button
    mat-icon-button
    class="recordControl"
    (click)="toggleInfoCard()"
    data-title="Device Info"
  >
    <img src="../../../assets/icons/HistoryInfo.png" />
  </button>
  <div
    class="card rounded d-none infoCard"
    style="position: absolute; bottom: 60px !important"
  >
    <div
      class="card-header rounded"
      style="
        color: white !important;
        padding: 5px;
        font-weight: lighter !important;
        background-color: #18497d !important;
        border-bottom-right-radius: 0px !important;
        border-bottom-left-radius: 0px !important;
      "
    >
      <h3 class="m-0">Information</h3>
    </div>
    <div
      class="card-body row m-0 p-2 rounded"
      style="
        background-color: #f6f6f6 !important;
        background-image: url('../../../../assets/images/map.png');

        background-size: 51%;
        background-repeat: no-repeat;
        background-position: center;
        border-top-right-radius: 0px !important;
        border-top-left-radius: 0px !important;
      "
    >
      <div class="col-md-12">
        <h4 style="color: #27b489 !important">General Information</h4>
        <div
          style="
            display: flex;
            justify-content: space-evenly;
            margin-bottom: 10px;
          "
        >
          <div class="border-right" style="padding: 10px">
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Serial
            </h6>
            <h6 class="text-muted m-0 p-0">1209114</h6>
          </div>
          <div class="border-right" style="padding: 10px">
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Name
            </h6>
            <h6 class="text-muted m-0 p-0">LMG 1020</h6>
          </div>
          <div class="border-right" style="padding: 10px">
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Latitude
            </h6>
            <h6 class="text-muted m-0 p-0">32.4533 / 32* 31* 43.7* N</h6>
          </div>
          <div class="border-right" style="padding: 10px">
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Latitude
            </h6>
            <h6 class="text-muted m-0 p-0">32.4533 / 32* 31* 43.7* N</h6>
          </div>
          <div style="padding: 10px">
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Last Updated
            </h6>
            <h6 class="text-muted m-0 p-0">Dec 17 2020 4:02:34 PM</h6>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <h4 style="color: #27b489 !important">Sensor Information</h4>
        <div style="display: flex; margin-bottom: 10px">
          <div
            class="border-right"
            style="
              padding: 10px;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              width: calc(100% / 5);
            "
          >
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Velocity
            </h6>
            <h6 class="text-muted m-0 p-0">21.0 MPH / 35KPH</h6>
          </div>
          <div
            class="border-right"
            style="
              padding: 10px;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              width: calc(100% / 5);
            "
          >
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Heading
            </h6>
            <h6 class="text-muted m-0 p-0">184* South</h6>
          </div>
          <div
            class="border-right"
            style="
              padding: 10px;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              width: calc(100% / 5);
            "
          >
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              GPS Satellites
            </h6>
            <h6 class="text-muted m-0 p-0">0</h6>
          </div>
          <div
            class="border-right"
            style="
              padding: 10px;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              width: calc(100% / 5);
            "
          >
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Ignition
            </h6>
            <h6 class="text-muted m-0 p-0">Off</h6>
          </div>
          <div
            style="
              padding: 10px;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              width: calc(100% / 5);
            "
          >
            <h6
              class="m-0"
              style="color: #18497d; margin-bottom: 5px !important"
            >
              Power
            </h6>
            <h6 class="text-muted m-0 p-0">0%</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Notification Panel -->
<div class="notificationPanel d-none rounded shadow">
  <div *ngIf="notifications.length">
    <div *ngFor="let data of notifications; let i = index" class="notification">
      <strong>
        <p class="m-0">{{ data.Location }}</p>
      </strong>
      <p>{{ data.Mode }}</p>
      <mat-divider></mat-divider>
    </div>
  </div>
  <div ngElse>
    <h3 style="text-align: center">No New Notifications</h3>
  </div>
</div>

<div class="vehicleCardLeaflet d-none">
  <div
    class="col-md-12"
    style="margin: 5px 0px 0px"
    *ngFor="let item of singleDeviceData; let i = index"
  >
    <div
      class="col-md-12 p-0"
      style="display: flex; justify-content: space-between"
    >
      <span style="display: flex; align-items: center">
        <span class="carName"
          >{{ item.veh_reg_no }}
          <img
            src="../../../assets/icons/Truck.png"
            style="height: 24px !important"
            alt="..."
        /></span>
      </span>
      <button
        type="button"
        class="showMoreButton btn btn-sm"
        (click)="toggleInfo()"
      >
        Show More
      </button>
    </div>
    <div
      class="col-md-12 row"
      style="margin: 10px 0px !important; color: #18497d"
    >
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">&nbsp;</div>
        <div class="col-12">GPS: &nbsp;({{ item.gps_satelite }})</div>
        <div class="col-12">HDOP: &nbsp;({{ item.h_v_dop }})</div>
      </div>
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">GSM: &nbsp;({{ item.gsm_signal }})</div>
        <div class="col-12">VDOP: &nbsp;({{ item.h_v_dop }})</div>
        <div class="col-12">GPS: &nbsp;({{ item.gps_satelite }})</div>
      </div>
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">&nbsp;</div>
        <div class="col-12">INT: &nbsp;({{ item.int_bat_voltage }})</div>
        <div class="col-12">EXT: &nbsp;({{ item.ext_bat_voltage }})</div>
      </div>
      <div
        class="col-md-12 m-0 border-top mt-2"
        style="display: flex; padding: 1.2rem 0px 0px !important"
      >
        <div
          style="width: calc(100% / 3) !important; text-align: center"
          class="border-right"
        >
          Speed: <br />{{ item.speed }}
        </div>
        <div
          style="width: calc(100% / 3) !important; text-align: center"
          class="border-right"
        >
          RPM: <br />{{ item.rpm }}
        </div>
        <div style="width: calc(100% / 3) !important; text-align: center">
          Mileage: <br />{{ item.mileage_cur_value }}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="vehicleCardLeafletMore col-md-12 m-0 row d-none rounded">
  <div *ngFor="let item of singleDeviceData; let i = index">
    <div
      class="col-md-12"
      style="display: flex; justify-content: space-between"
    >
      <span class="carName"
        >Device {{ item.veh_reg_no }}
        <img
          src="../../../assets/icons/Truck.png"
          style="height: 34px !important"
          alt="..."
      /></span>
      <button
        type="button"
        class="showLessButton btn btn-sm"
        (click)="toggleInfo()"
      >
        Show Less
      </button>
    </div>
    <div class="col-md-12 row m-0">
      <div
        class="col-md-12 row"
        style="margin: 10px 0px !important; color: #18497d"
      >
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GSM.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GSM: &nbsp;({{ item.gsm_signal }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GPS.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GPS: &nbsp;({{ item.gps_satelite }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/HDOP.png" />
            </div>
            <div class="col-md-9 m-0 p-0">HDOP: &nbsp;({{ item.h_v_dop }})</div>
          </div>
        </div>
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            &nbsp;
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GPS.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GPS: &nbsp;({{ item.gps_satelite }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/VDOP.png" />
            </div>
            <div class="col-md-9 m-0 p-0">VDOP: &nbsp;({{ item.h_v_dop }})</div>
          </div>
        </div>
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            &nbsp;
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/INT.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              INT: &nbsp;({{ item.int_bat_voltage }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/EXT.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              EXT: &nbsp;({{ item.ext_bat_voltage }})
            </div>
          </div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/Speed1.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">Speed:</div>
          <div class="col-12">{{ item.speed }}</div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/RPM.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">RPM:</div>
          <div class="col-12">{{ item.rpm }}</div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/MileAge.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">Mileage:</div>

          <div class="col-12">{{ item.mileage_cur_value }}</div>
        </div>
      </div>
      <div
        class="col-md-12 row border-top m-0"
        style="padding: 10px 0px !important"
      >
        <div class="col-md-6 row p-0 m-0 border-right">
          <div
            class="col-md-3 p-0 m-0"
            style="
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              color: #00c190;
            "
          >
            <img
              src="../../../assets/icons/DeviceStatus.png"
              style="height: 5rem !important"
            />
            <h4>Device Status</h4>
          </div>
          <div class="col-md-9 p-0 row m-0" style="color: #18497d">
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/Coordinaate.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Coordinate:
              </div>
              <div class="col-md-6">{{ [item.lat, item.lng] }}</div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/GeoFence.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />GeoFence:
              </div>
              <div class="col-md-6">{{ item.geo_status }}</div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/DriverName.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Driver Name:
              </div>
              <div class="col-md-6">
                {{ item.driver ? item.driver : "Gonzalez" }}
              </div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/Date.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Date
              </div>
              <div class="col-md-6">{{ item.gps_datetime }}</div>
            </div>
          </div>
        </div>
        <div class="col-md-6 row p-0 m-0">
          <div
            class="col-md-3 p-0 m-0"
            style="
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              color: #00c190;
            "
          >
            <img
              src="../../../assets/icons/info1.png"
              style="height: 5rem !important"
            />
            <h4>Asset Info</h4>
          </div>
          <div class="col-md-9 p-0 row m-0" style="color: #18497d">
            <div class="col-12 row m-0">
              <div class="col-md-6">Device#:</div>
              <div class="col-md-6">{{ item.device_id }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Device Type:</div>
              <div class="col-md-6">{{ item.veh_type }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Device Model:</div>
              <div class="col-md-6">{{ item.dev_model_id }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Drive Name</div>
              <div class="col-md-6">
                {{ item.driver ? item.driver : "Gonzalez" }}
              </div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Sim#:</div>
              <div class="col-md-6">{{ item.sim_no }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Management#</div>
              <div class="col-md-6">{{ item.mgt_sim_no }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="createFence rounded shadow d-none">
  <div style="display: flex; justify-content: space-between">
    <h3>Geo Fence Information</h3>
    <button mat-icon-button (click)="closeCreateFencing()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="row m-0 p-0">
    <div class="col-12 p-0 m-0 pt-2">
      <label>Select Fence Type</label>
      <select class="fenceType" (change)="onInputChange($event)">
        <option value="Select Fence Type" disabled selected>
          Select Fence Type
        </option>
        <option value="Circle">Circle</option>
        <option value="Rectangle">Rectangle</option>
        <option value="Polygon">Polygon</option>
      </select>
    </div>
    <div class="col-12 p-0 m-0 pt-2" *ngIf="fenceType === 'Circle'">
      <label>Circle Radius</label>
      <input
        class="fenceType border radius"
        placeholder="Enter Circle Radius"
      />
    </div>
    <div class="col-12 p-0 m-0 pt-2">
      <label>Fence Name</label>
      <input
        class="fenceType border fenceName"
        placeholder="Enter Fence Name"
      />
    </div>
    <div class="col-12 p-0 m-0 pt-2">
      <label>Country</label>
      <input class="fenceType border country" placeholder="Enter Country" />
    </div>
    <div class="col-12 p-0 m-0 pt-2">
      <label>City</label>
      <input class="fenceType border city" placeholder="Enter City" />
    </div>
    <div class="col-12 p-0 m-0 confirmationBox">
      <button
        class="fenceDrawBtn"
        *ngIf="fenceType === 'Rectangle'"
        (click)="drawRectangle()"
      >
        Draw
      </button>
      <button
        class="fenceDrawBtn"
        *ngIf="fenceType === 'Polygon'"
        (click)="drawPolygon()"
      >
        Draw
      </button>
      <span>
        <button class="fenceCancelBtn">Cancel</button>
        <button
          class="fenceDoneBtn"
          *ngIf="fenceType === 'Circle'"
          (click)="sendCircle()"
        >
          Confirm
        </button>
        <button
          class="fenceDoneBtn"
          *ngIf="fenceType === 'Rectangle'"
          (click)="sendRectangle()"
        >
          Confirm
        </button>
        <button
          class="fenceDoneBtn"
          *ngIf="fenceType === 'Polygon'"
          (click)="sendPolygon()"
        >
          Confirm
        </button>
      </span>
    </div>
  </div>
</div>
