<!-- <div class="col-md-12 row p-1 m-0"> -->
<!-- <div class="col-md-2 p-1">
    <div class="shadow p-1 rounded" style="height: fit-content !important">
      <div class="panelKeysContainer rounded">
        <button mat-button class="userPanelKeys" routerLink="test">
          <mat-icon style="height: 0 !important">settings</mat-icon>
          <br />
          Control
        </button>
        <button mat-button class="userPanelKeys">
          <mat-icon style="height: 0 !important"
            >settings_applications</mat-icon
          >
          <br />Settings
        </button>
        <button mat-button class="userPanelKeys" (click)="openHistoryDialog()">
          <mat-icon style="height: 0 !important">history</mat-icon>
          <br />History
        </button>
      </div>
      <div class="vehicleList">
        <mat-tab-group [disablePagination]="true">
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>assignment</mat-icon>
              <span>List ({{ TREE_DATA.length }})</span>
            </ng-template>
            <input type="text" placeholder="Search" class="SearchInput" />
            <mat-accordion>
              <mat-expansion-panel
                style="margin-bottom: 0.6rem"
                class="ParentCheckBox"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <input
                      type="checkbox"
                      style="margin-right: 10px"
                      (change)="onParentCheckBox($event)"
                    />
                    Devices ({{ TREE_DATA[0].SubMenu.length }})
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <span *ngFor="let item of TREE_DATA; let i = index">
                  <span *ngIf="item.grp_name === 'Devices'">
                    <div
                      class="m-0 singleDevice border-bottom"
                      *ngFor="let t1 of item.SubMenu; let j = index"
                    >
                      <input
                        type="checkbox"
                        [attr.data-dataTrack]="t1.datatrack"
                        [attr.data-device_id]="t1.device_id"
                        (change)="onCheck($event, t1.datatrack, t1.device_id)"
                      />
                      <mat-icon>drive_eta</mat-icon>
                      <span
                        style="
                          max-width: 10ch;
                          white-space: nowrap;
                          overflow: hidden;
                          text-overflow: ellipsis;
                        "
                        >{{ t1.device_id }}
                      </span>
                      <small class="text-center"
                        >Car's <br />
                        Speed</small
                      >
                      <mat-icon>arrow_forward</mat-icon>
                    </div>
                  </span>
                </span>
              </mat-expansion-panel>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <input type="checkbox" style="margin-right: 10px" /> Assets
                    ({{ TREE_DATA[1].SubMenu.length }})
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <span *ngFor="let item of TREE_DATA; let i = index">
                  <span *ngIf="item.grp_name === 'Assets'">
                    <mat-accordion>
                      <mat-expansion-panel
                        *ngFor="let t1 of item.SubMenu; let j = index"
                      >
                        <mat-expansion-panel-header class="nestedPanelHeader">
                          <mat-panel-title>
                            <input type="checkbox" style="margin-right: 10px" />
                            {{ t1.grp_name }} ({{ t1.SubMenu.length }})
                          </mat-panel-title>
                        </mat-expansion-panel-header>
                        <span *ngIf="t1.SubMenu.length">
                          <mat-expansion-panel
                            *ngFor="let t2 of t1.SubMenu; let k = index"
                          >
                            <mat-expansion-panel-header
                              class="MorenestedPanelHeader"
                            >
                              <mat-panel-title>
                                <input
                                  type="checkbox"
                                  style="margin-right: 10px"
                                />
                                <span *ngIf="t2.vrn !== null">{{
                                  t2.vrn
                                }}</span>
                                <span ngElse>
                                  {{ t2.grp_name }} ({{ t2.SubMenu.length }})
                                </span>
                              </mat-panel-title>
                            </mat-expansion-panel-header>
                            <span *ngIf="t2.SubMenu.length">
                              <mat-expansion-panel
                                *ngFor="let t3 of t2.SubMenu; let l = index"
                                ><mat-expansion-panel-header
                                  class="nestedPanelHeader"
                                >
                                  <mat-panel-title>
                                    <input
                                      type="checkbox"
                                      style="margin-right: 10px"
                                    />
                                    <span *ngIf="t3.vrn !== null">{{
                                      t3.vrn
                                    }}</span>
                                    <span ngElse>
                                      {{ t3.grp_name }}
                                    </span>
                                  </mat-panel-title>
                                </mat-expansion-panel-header>
                              </mat-expansion-panel>
                            </span>
                          </mat-expansion-panel>
                        </span>
                      </mat-expansion-panel>
                    </mat-accordion>
                  </span>
                </span>
              </mat-expansion-panel>
            </mat-accordion>
          </mat-tab>
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>supervisor_account</mat-icon>
              <span> Users </span>
            </ng-template>
            Content 1 </mat-tab
          ><mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>warning</mat-icon>
              <span> Users </span>
            </ng-template>
            Content 1
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div> -->
<!-- <div class="col-md-12 p-1"> -->
<div class="vehicleCard d-none">
  <div
    class="col-md-12"
    style="margin: 5px 0px 0px"
    *ngFor="let item of singleDeviceData; let i = index"
  >
    <div
      class="col-md-12 p-0"
      style="display: flex; justify-content: space-between"
    >
      <span style="display: flex; align-items: center">
        <span class="carName"
          >Device {{ item.device_id }}
          <img
            src="../../../assets/icons/Truck.png"
            style="height: 24px !important"
            alt="..."
        /></span>
      </span>
      <button
        type="button"
        class="showMoreButton btn btn-sm"
        (click)="toggleInfo()"
      >
        Show More
      </button>
    </div>
    <div
      class="col-md-12 row"
      style="margin: 10px 0px !important; color: #18497d"
    >
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">&nbsp;</div>
        <div class="col-12">GPS: &nbsp;({{ item.gps_satelite }})</div>
        <div class="col-12">HDOP: &nbsp;({{ item.h_v_dop }})</div>
      </div>
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">GSM: &nbsp;({{ item.gsm_signal }})</div>
        <div class="col-12">VDOP: &nbsp;({{ item.h_v_dop }})</div>
        <div class="col-12">GPS: &nbsp;({{ item.gps_satelite }})</div>
      </div>
      <div
        class="col-md-4 row m-0"
        style="display: flex; flex-direction: column; align-items: center"
      >
        <div class="col-12">&nbsp;</div>
        <div class="col-12">INT: &nbsp;({{ item.int_bat_voltage }})</div>
        <div class="col-12">EXT: &nbsp;({{ item.ext_bat_voltage }})</div>
      </div>
      <div
        class="col-md-12 m-0 border-top mt-2"
        style="display: flex; padding: 1.2rem 0px 0px !important"
      >
        <div
          style="width: calc(100% / 3) !important; text-align: center"
          class="border-right"
        >
          Speed: <br />{{ item.speed }}
        </div>
        <div
          style="width: calc(100% / 3) !important; text-align: center"
          class="border-right"
        >
          RPM: <br />{{ item.rpm }}
        </div>
        <div style="width: calc(100% / 3) !important; text-align: center">
          Mileage: <br />{{ item.mileage_cur_value }}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="vehicleCardMore col-md-12 m-0 row d-none rounded">
  <div *ngFor="let item of singleDeviceData; let i = index">
    <div
      class="col-md-12"
      style="display: flex; justify-content: space-between"
    >
      <span class="carName"
        >Device {{ item.device_id }}
        <img
          src="../../../assets/icons/Truck.png"
          style="height: 34px !important"
          alt="..."
      /></span>
      <button
        type="button"
        class="showLessButton btn btn-sm"
        (click)="toggleInfo()"
      >
        Show Less
      </button>
    </div>
    <div class="col-md-12 row m-0">
      <div
        class="col-md-12 row"
        style="margin: 10px 0px !important; color: #18497d"
      >
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GSM.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GSM: &nbsp;({{ item.gsm_signal }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GPS.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GPS: &nbsp;({{ item.gps_satelite }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/HDOP.png" />
            </div>
            <div class="col-md-9 m-0 p-0">HDOP: &nbsp;({{ item.h_v_dop }})</div>
          </div>
        </div>
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            &nbsp;
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/GPS.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              GPS: &nbsp;({{ item.gps_satelite }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/VDOP.png" />
            </div>
            <div class="col-md-9 m-0 p-0">VDOP: &nbsp;({{ item.h_v_dop }})</div>
          </div>
        </div>
        <div
          class="col-md-2 row m-0 p-0"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: small !important;
          "
        >
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            &nbsp;
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/INT.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              INT: &nbsp;({{ item.int_bat_voltage }})
            </div>
          </div>
          <div
            class="col-md-12 row m-0 p-0"
            style="
              display: flex;
              justify-content: space-between;
              padding: 5px 0px !important;
            "
          >
            <div class="col-md-3 m-0 p-0">
              <img style="height: 1.4em" src="../../../assets/icons/EXT.png" />
            </div>
            <div class="col-md-9 m-0 p-0">
              EXT: &nbsp;({{ item.ext_bat_voltage }})
            </div>
          </div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/Speed1.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">Speed:</div>
          <div class="col-12">{{ item.speed }}</div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/RPM.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">RPM:</div>
          <div class="col-12">{{ item.rpm }}</div>
        </div>
        <div class="col-md-2 row m-0 p-0" style="text-align: center">
          <div class="col-12">
            <img
              src="../../../assets/icons/MileAge.png"
              alt=""
              style="height: 3em !important"
            />
          </div>
          <div class="col-12">Mileage:</div>

          <div class="col-12">{{ item.mileage_cur_value }}</div>
        </div>
      </div>
      <div
        class="col-md-12 row border-top m-0"
        style="padding: 10px 0px !important"
      >
        <div class="col-md-6 row p-0 m-0 border-right">
          <div
            class="col-md-3 p-0 m-0"
            style="
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              color: #00c190;
            "
          >
            <img
              src="../../../assets/icons/DeviceStatus.png"
              style="height: 5rem !important"
            />
            <h4>Device Status</h4>
          </div>
          <div class="col-md-9 p-0 row m-0" style="color: #18497d">
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/Coordinaate.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Coordinate:
              </div>
              <div class="col-md-6">{{ [item.lat, item.lng] }}</div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/GeoFence.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />GeoFence:
              </div>
              <div class="col-md-6">{{ item.geo_status }}</div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/DriverName.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Driver Name:
              </div>
              <div class="col-md-6">
                {{ item.driver ? item.driver : "Gonzalez" }}
              </div>
            </div>
            <div class="col-12 row" style="margin: 5px 0px !important">
              <div class="col-md-6">
                <img
                  src="../../../assets/icons/Date.png"
                  style="height: 1.4em !important; margin: 0px 5px !important"
                />
                Date
              </div>
              <div class="col-md-6">{{ item.gps_datetime }}</div>
            </div>
          </div>
        </div>
        <div class="col-md-6 row p-0 m-0">
          <div
            class="col-md-3 p-0 m-0"
            style="
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              color: #00c190;
            "
          >
            <img
              src="../../../assets/icons/info1.png"
              style="height: 5rem !important"
            />
            <h4>Asset Info</h4>
          </div>
          <div class="col-md-9 p-0 row m-0" style="color: #18497d">
            <div class="col-12 row m-0">
              <div class="col-md-6">Device#:</div>
              <div class="col-md-6">{{ item.device_id }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Device Type:</div>
              <div class="col-md-6">{{ item.veh_type }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Device Model:</div>
              <div class="col-md-6">{{ item.dev_model_id }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Drive Name</div>
              <div class="col-md-6">
                {{ item.driver ? item.driver : "Gonzalez" }}
              </div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Sim#:</div>
              <div class="col-md-6">{{ item.sim_no }}</div>
            </div>
            <div class="col-12 row m-0">
              <div class="col-md-6">Management#</div>
              <div class="col-md-6">{{ item.mgt_sim_no }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- <div *ngIf="mapType === 'Open Street Maps'"> -->
<div id="leaflet-map" style="height: 89vh !important" class="rounded"></div>
<!-- <div *ngIf="mapType === 'Google Maps'">
    <agm-map
      style="height: 89vh !important"
      class="rounded"
      [disableDefaultUI]="true"
      [latitude]="lat"
      [longitude]="lng"
      [mapTypeId]="googleMapType"
      [fullscreenControl]="true"
      [mapTypeControl]="true"
      [fitBounds]="true"
    >
      <span *ngFor="let data of markers; let i = index">
        <span *ngIf="data[1] != 0 && data[2] != 0">
          <agm-marker
            [latitude]="data[1]"
            [longitude]="data[2]"
            [zoom]="zoom"
            [markerClickable]="true"
            [agmFitBounds]="true"
            (markerClick)="getMarkerInfo([data[0], data[1], data[2]])"
          >
          </agm-marker>
        </span>
      </span>
    </agm-map>
  </div>
</div> -->
<!-- </div> -->
<!-- </div> -->
